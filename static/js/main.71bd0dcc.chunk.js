(this["webpackJsonpmovies-finder"]=this["webpackJsonpmovies-finder"]||[]).push([[0],{17:function(e,t,a){e.exports=a(35)},30:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),l=a.n(c),s=(a(22),a(3)),u=a(2),i=a.n(u),o=a(4),m=a(6),p=a(11),d=(a(30),a(31),a(32),function(e){var t=e.Title,a=e.Year,n=e.Type,c=e.imdbID,l=e.Poster,s=e.showDetails;return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-image"},r.a.createElement("figure",{className:"image is-4by3"},r.a.createElement("img",{src:l,alt:"Film logo"}))),r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-content"},r.a.createElement("p",{className:"title is-8"},t),r.a.createElement("p",null,"Type: ".concat(n)),r.a.createElement("p",null,"Release year: ".concat(a)),r.a.createElement("button",{type:"button",onClick:function(){return s(c)},className:"button details-button"},"Show details")))))}),E=function(e){var t=e.movies,a=void 0===t?[]:t,n=e.showDetails;return r.a.createElement("div",{className:"movies"},a.map((function(e){return r.a.createElement(d,Object.assign({key:e.imdbID,showDetails:n},e))})))},f=a(10),b=a.n(f),v=(a(33),function(e){var t=e.pages,a=e.changePage,n=e.currentPage,c=Array.from({length:t},(function(e,t){return t+1}));return r.a.createElement("ul",{className:"pagination"},1!==n&&r.a.createElement("li",null,r.a.createElement("button",{type:"button",className:"page-btn slide",onClick:function(){a(1)}},"<<")),c.slice(n>=3?n-3:0,n+2).map((function(e){return r.a.createElement("li",{key:e},r.a.createElement("button",{type:"button",className:b()({"page-btn":!0,active:e===n}),onClick:function(){return a(e)}},e))})),n<t&&r.a.createElement("li",null,r.a.createElement("button",{type:"button",className:"page-btn slide",onClick:function(){a(t),t>10&&n!==t&&n>10&&(c=c.map((function(e){return e+1})))}},">>")))}),h=function(e){return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-image"},r.a.createElement("figure",{className:"image is-4by3"},r.a.createElement("img",{src:e.Poster,alt:"Film logo"}))),r.a.createElement("div",{className:"card-content"},r.a.createElement("div",{className:"media"},r.a.createElement("div",{className:"media-content"},r.a.createElement("p",{className:"title is-8"},e.Title))),r.a.createElement("hr",null),r.a.createElement("div",{className:"content"},e.Plot,r.a.createElement("hr",null),r.a.createElement("a",{href:"https://www.imdb.com/title/".concat(e.imdbID,"/")},"IMDB link"),r.a.createElement("hr",null),r.a.createElement("p",null,r.a.createElement("b",null,"Type:")),r.a.createElement("p",null,e.Type),r.a.createElement("p",null,r.a.createElement("b",null,"Director:")),r.a.createElement("p",null,e.Director),r.a.createElement("p",null,r.a.createElement("b",null,"Actors:")),r.a.createElement("p",null,e.Actors),r.a.createElement("p",null,r.a.createElement("b",null,"Genre:")),r.a.createElement("p",null,e.Genre),r.a.createElement("p",null,r.a.createElement("b",null,"Country:")),r.a.createElement("p",null,e.Country),r.a.createElement("p",null,r.a.createElement("b",null,"Production:")),r.a.createElement("p",null,e.Production),r.a.createElement("p",null,r.a.createElement("b",null,"Released:")),r.a.createElement("p",null,e.Released),r.a.createElement("p",null,r.a.createElement("b",null,"Duration:")),r.a.createElement("p",null,e.Runtime),r.a.createElement("p",null,r.a.createElement("b",null,"IMDB Rating:")),r.a.createElement("p",null,e.imdbRating),r.a.createElement("p",null,r.a.createElement("b",null,"PG rating:")),r.a.createElement("p",null,e.Rated))))},y=(a(34),a(1)),g=a(8),N=function(e){return e.movies},j=function(e){return e.detailedMovie},O=function(e){return e.searchHistory},w=function(e){return e.currentQuery},k=function(e){return e.totalResults},P=function(e){return e.currentPage},S=function(e){return{type:"setMovies",movies:e}},x=function(e){return{type:"setDetailedMovie",detailedMovie:e}},C=function(e){return{type:"setHistory",searchHistory:e}},D=function(e){return{type:"setCurrentQuery",currentQuery:e}},R=function(e){return{type:"setTotalResults",totalResults:e}},M=function(e){return{type:"setCurrentPage",currentPage:e}},I=localStorage.getItem("reduxState")?JSON.parse(localStorage.getItem("reduxState")):{movies:[],detailedMovie:null,searchHistory:[],currentQuery:"",totalResults:0,currentPage:1},H=Object(g.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setMovies":return Object(y.a)(Object(y.a)({},e),{},{movies:t.movies});case"setDetailedMovie":return Object(y.a)(Object(y.a)({},e),{},{detailedMovie:t.detailedMovie});case"setHistory":return Object(y.a)(Object(y.a)({},e),{},{searchHistory:t.searchHistory});case"setCurrentQuery":return Object(y.a)(Object(y.a)({},e),{},{currentQuery:t.currentQuery});case"setTotalResults":return Object(y.a)(Object(y.a)({},e),{},{totalResults:t.totalResults});case"setCurrentPage":return Object(y.a)(Object(y.a)({},e),{},{currentPage:t.currentPage});default:return e}}));H.subscribe((function(){localStorage.setItem("reduxState",JSON.stringify(H.getState()))}));var T=H,_=function(e){var t=e.findMovies,a=e.dispatch,c=e.searchHistory,l=e.notFound,s=e.setNotFound,u=Object(n.useState)(""),i=Object(p.a)(u,2),o=i[0],d=i[1];return r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"header--top"},r.a.createElement("div",{className:"search"},r.a.createElement("form",{className:"search-form",onSubmit:function(e){e.preventDefault(),t(o,1),a(D(o)),d(""),a(M(1))}},r.a.createElement("input",{type:"text",className:b()({"search-input":!0,"not-found":l}),value:o.trimLeft(),placeholder:"Enter movie title...",onChange:function(e){d(e.target.value),s(!1)}}),l&&r.a.createElement("p",{className:"help is-danger"},"Can't find a movie with such a title"),r.a.createElement("button",{type:"submit",className:"button"},"Search"),r.a.createElement("button",{type:"button",className:"button button--clear",onClick:function(){localStorage.clear(),window.location.reload()}},"Clear"))),r.a.createElement("div",null,r.a.createElement("h1",{className:"page-title"},"IMDB movies finder"))),r.a.createElement("div",{className:"search-history"},0!==c.length&&r.a.createElement("p",{className:"search-history__caption"},"Last 10 queries: "),r.a.createElement("ul",{className:"search-history__list"},c.map((function(e){return r.a.createElement("li",{key:e},r.a.createElement("button",{type:"button",className:"search-history__delete",onClick:function(){return a(C(Object(m.a)(c.filter((function(t){return t!==e})))))}},"x"),r.a.createElement("button",{type:"button",className:"search-history__item",onClick:function(){a(M(1)),a(D(e)),t(e,1)}},e))})))))},F="https://www.omdbapi.com/",Q=function(){var e=Object(o.a)(i.a.mark((function e(t,a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(F,"?s=").concat(t,"&apikey=81cd08c7&page=").concat(a));case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),B=function(){var e=Object(o.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(F,"?apikey=81cd08c7&i=").concat(t));case 2:return a=e.sent,e.abrupt("return",a.json());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(n.useState)(!1),t=Object(p.a)(e,2),a=t[0],c=t[1],l=Object(s.b)(),u=Object(s.c)(N),d=Object(s.c)(j),f=Object(s.c)(O),b=Object(s.c)(w),y=Object(s.c)(k),g=Object(s.c)(P),D=function(){var e=Object(o.a)(i.a.mark((function e(t,a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(t,a);case 2:"False"!==(n=e.sent).Response?(l(S(n.Search)),l(R(+n.totalResults)),r=t,f.includes(r)||(f.length<10?l(C([].concat(Object(m.a)(f),[r]))):l(C([].concat(Object(m.a)(f.slice(1)),[r]))))):c(!0);case 4:case"end":return e.stop()}var r}),e)})));return function(t,a){return e.apply(this,arguments)}}(),I=function(){var e=Object(o.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t);case 2:a=e.sent,l(x(a));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(o.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(b,t);case 2:a=e.sent,l(S(a.Search)),l(M(t));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=Math.floor(y/10);return r.a.createElement("div",{className:"page"},r.a.createElement("div",{className:"page-content"},r.a.createElement(_,{findMovies:D,dispatch:l,searchHistory:f,notFound:a,setNotFound:c}),r.a.createElement(E,{movies:u,showDetails:I}),y>10&&r.a.createElement(v,{pages:T,changePage:H,currentPage:g})),r.a.createElement("div",{className:"sidebar"},d&&r.a.createElement(h,d)))};l.a.render(r.a.createElement(s.a,{store:T},r.a.createElement(J,null)),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.71bd0dcc.chunk.js.map